{"is_source_file": true, "format": "JavaScript", "description": "This file implements a notes data store for a frontend application, providing CRUD operations, search, tagging, and favorite toggling, with persistence backed by localStorage.", "external_files": ["localStorage"], "external_methods": ["localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "crypto.randomUUID"], "published": ["createNote", "getNote", "updateNote", "deleteNote", "toggleFavorite", "listNotes", "listTags"], "classes": [], "methods": [{"name": "readStore", "description": "Reads and parses the notes store from localStorage safely, returning an object with notes array."}, {"name": "writeStore", "description": "Saves the provided store object to localStorage after ensuring notes is an array."}, {"name": "uid", "description": "Generates a unique ID for notes, using crypto if available, otherwise fallback to a combination of Math.random and timestamp."}, {"name": "normalizeNote", "description": "Normalizes a note object, ensuring all fields are set and formatted correctly, including generating IDs and timestamps."}, {"name": "sortNotes", "description": "Sorts notes by updatedAt descending, then by title ascending."}, {"name": "createNote", "description": "Creates a new note with optional initial fields, persists it, and returns the created note."}, {"name": "getNote", "description": "Retrieves a note by its ID."}, {"name": "updateNote", "description": "Updates a note's fields by ID, updates the timestamp, persists changes, and returns the updated note."}, {"name": "deleteNote", "description": "Deletes a note by ID, returns true if deletion occurred."}, {"name": "toggleFavorite", "description": "Toggles the favorite status of a note by ID, returns the updated note."}, {"name": "listNotes", "description": "Returns notes filtered by optional tag, favorites, and search query, sorted by update time and title."}, {"name": "listTags", "description": "Returns an array of tags with their counts across all notes."}], "calls": ["localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "crypto.randomUUID", "Date.now", "Date.prototype.toISOString", "Array.isArray", "Array.prototype.filter", "Array.prototype.some", "Array.prototype.map", "Array.prototype.sort", "String.prototype.trim", "String.prototype.toLowerCase", "Number.prototype.toString"], "search-terms": ["localStorage-backed notes store", "CRUD notes", "search notes by tags", "favorite notes", "notes ID generation", "notes normalization", "notes sorting"], "state": 2, "file_id": 10, "knowledge_revision": 30, "git_revision": "72940fbeb1b72322d56107cc9dabda376027e803", "revision_history": [{"22": ""}, {"30": "72940fbeb1b72322d56107cc9dabda376027e803"}], "ctags": [], "filename": "notes_frontend/src/store.js", "hash": "974e9079ffee26f9e232235a24d08e75", "format-version": 4, "code-base-name": "https://github.com/kavia-common/personal-notes-organizer-157376-157385.git:kavia-main"}